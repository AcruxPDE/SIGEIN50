-- =============================================
-- Proyecto: Sigein 5.0
-- Copyright (c) - Acrux - 2016
-- Author: GABRIEL VAZQUEZ
-- CREATE date: 21/01/2016
-- Description: Obtiene los datos para el valor del
-- =============================================
CREATE PROCEDURE IDP.SPE_REP_RESULT_PUESTO

	@PIN_ID_PUESTO AS INT

AS
BEGIN
	SELECT
		p.ID_PUESTO,
		p.FG_ACTIVO,
		p.FE_INACTIVO,
		p.CL_PUESTO,
		p.NB_PUESTO,
		p.NO_EDAD_MINIMA,
		p.NO_EDAD_MAXIMA,
		p.XML_REQUERIMIENTOS,
		p.XML_OBSERVACIONES,
		p.XML_RESPONSABILIDAD,
		p.XML_AUTORIDAD,	
		p.CL_TIPO_PUESTO,
		p.ID_BITACORA,
		p.CL_POSICION_ORGANIGRAMA,
		p.CL_DOCUMENTO,
		p.CL_VERSION,
		p.FE_ELABORACION,
		p.NB_ELABORO,
		p.FE_REVISION,
		p.NB_REVISO,
		p.FE_AUTORIZACION,
		p.NB_AUTORIZO,
		p.DS_CONTROL_CAMBIOS,
		p.CL_TIPO_PRESTACIONES,
		p.XML_PRESTACIONES,
		co.NB_CENTRO_OPTVO,
		ca.NB_CENTRO_ADMVO,
		d.NB_DEPARTAMENTO,
		ec.NB_CATALOGO_VALOR AS NB_ESTADO_CIVIL,
		p.CL_GENERO,
		g.NB_CATALOGO_VALOR AS NB_GENERO
	FROM ADM.M_PUESTO p
		INNER JOIN ADM.C_CENTRO_OPTVO co ON p.ID_CENTRO_OPERATIVO = co.ID_CENTRO_OPTVO
		INNER JOIN ADM.C_CENTRO_ADMVO ca ON p.ID_CENTRO_ADMINISTRATIVO = ca.ID_CENTRO_ADMVO
		INNER JOIN ADM.M_DEPARTAMENTO d ON P.ID_DEPARTAMENTO = d.ID_DEPARTAMENTO
		INNER JOIN ADM.C_CATALOGO_VALOR ec on p.CL_ESTADO_CIVIL = ec.CL_CATALOGO_VALOR
		INNER JOIN ADM.C_CATALOGO_VALOR g on p.CL_GENERO = g.CL_CATALOGO_VALOR
	WHERE p.ID_PUESTO = @PIN_ID_PUESTO

END

-- EXEC IDP.SPE_REP_RESULT_PUESTO 42